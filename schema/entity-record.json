{
  "$id": "urn:entity",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "version": "0.4",
  "title": "Entity record",
  "description": "A record identifying and describing the entity that is the subject of the ownership or control described in an ownership or control statement.",
  "type": "object",
  "properties": {
    "isComponent": {
      "title": "Is component",
      "description": "Does this Entity Statement represent a component of an indirect ownership-or-control relationship? Where `isComponent` is 'true': (1) the `statementID` of this Entity Statement MUST be an element in the `componentStatementIDs` array of that primary Ownership-or-control Statement, (2) this Entity Statement MUST come before that primary Ownership-or-control Statement in a BODS package or stream, (3) the replacement of this Entity Statement SHOULD be considered when replacing the primary Ownership-or-control Statement. The primary Ownership-or-control Statement MUST have a `isComponent` value of 'false'.",
      "type": "boolean"
    },
    "entityType": {
      "entityType": "object",
      "title": "Entity Type",
      "description": "The form of the entity described in the Statement.",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "title": "Entity type",
          "description": "A value from the entityType codelist.",
          "codelist": "entityType.csv",
          "openCodelist": false,
          "enum": [
            "registeredEntity",
            "legalEntity",
            "arrangement",
            "anonymousEntity",
            "unknownEntity",
            "state",
            "stateBody"
          ]
        },
        "subtype": {
          "type": "string",
          "title": "Entity subtype",
          "description": "A value from the entitySubtype codelist. This MUST align with the `entityType` value.",
          "codelist": "entitySubtype.csv",
          "enum": [
            "governmentDepartment",
            "stateAgency",
            "other",
            "trust",
            "nomination"
          ],
          "openCodelist": false
        },
        "details": {
          "type": "string",
          "title": "Details",
          "description": "A local name for this type of entity, or any further information to identify the type of entity. For example, in Finland 'ministeri√∂' for a government department."
        }
      },
      "propertyOrder": 4,
      "if":{
        "not":{
          "properties":{
            "subtype":{
              "type":"null"
            }
          }
        }
      },
      "then":{
        "allOf":[
          {
            "if":{
              "properties":{
                "subtype":{
                  "const": "trust"
                }
              }
            },
            "then":{
              "properties":{
                "type":{
                  "enum":[
                    "arrangement",
                    "legalEntity"
                  ]
                }
              }
            }
          },
          {
            "if":{
              "properties":{
                "subtype":{
                  "const": "nomination"
                }
              }
            },
            "then":{
              "properties":{
                "type":{
                  "const":"arrangement"
                }
              }
            }
          },
          {
            "if":{
              "properties":{
                "subtype":{
                  "enum": [
                    "governmentDepartment",
                    "stateAgency"
                  ]
                }
              }
            },
            "then":{
              "properties":{
                "type":{
                  "const": "stateBody"
                }
              }
            }
          }
        ]
      }
    },
    "unspecifiedEntityDetails": {
      "$ref": "urn:components#/$defs/UnspecifiedRecord"
    },
    "name": {
      "title": "Entity name",
      "description": "The declared name of this entity.",
      "type": "string",
      "propertyOrder": 10
    },
    "alternateNames": {
      "title": "Alternative names",
      "description": "An array of other names this entity is known by.",
      "type": "array",
      "items": {
        "type": "string",
        "title": "Name",
        "description": "A name this entity is known by."
      },
      "propertyOrder": 12
    },
    "jurisdiction": {
      "title": "Jurisdiction",
      "description": "The jurisdiction in which this entity was registered (for legal and registered entities, and arrangements). Or the state's jurisdiction (for states and state bodies).",
      "propertyOrder": 15,
      "$ref": "urn:components#/$defs/Jurisdiction"
    },
    "identifiers": {
      "title": "Identifiers",
      "description": "One or more official identifiers for this entity. Where available, official registration numbers should be provided.",
      "type": "array",
      "items": {
        "$ref": "urn:components#/$defs/Identifier"
      },
      "propertyOrder": 20
    },
    "foundingDate": {
      "title": "Founding date",
      "description": "The date on which this entity was founded, created or registered. The date MUST be given in YYYY-MM-DD format. Where a precise month or date are unknown, the value may be rounded to the first day of the month. This rounding SHOULD be noted in accompanying guidance for users of the data.",
      "type": "string",
      "format": "date",
      "propertyOrder": 30
    },
    "dissolutionDate": {
      "title": "Dissolution date",
      "description": "The date on which this entity was disolved or ceased if it is no longer active. The date MUST be given in YYYY-MM-DD format. Where a precise month or date are unknown, the value may be rounded to the first day of the month. This rounding SHOULD be noted in accompanying guidance for users of the data.",
      "type": "string",
      "format": "date",
      "propertyOrder": 35
    },
    "addresses": {
      "title": "Addresses",
      "description": "One or more addresses for this entity.",
      "type": "array",
      "items": {
        "$ref": "urn:components#/$defs/Address"
      },
      "propertyOrder": 40
    },
    "uri": {
      "title": "URI",
      "description": "Where a persistent URI (https://en.wikipedia.org/wiki/Uniform_Resource_Identifier) is available for this entity this should be included.",
      "type": "string",
      "format": "uri",
      "propertyOrder": 21
    },
    "publicListing": {
      "title": "Public listing",
      "description": "Details of a publicly listed company, its securities (shares and other tradable financial instruments related to the entity), and related regulatory filings.",
      "$ref": "#/$defs/PublicListing"
    },
    "formedByStatute": {
      "type": "object",
      "title": "Formed by statute",
      "description": "The law which mandated the formation of the entity described in the statement, where applicable. This information SHOULD be provided where a state has created an agency or other entity with specific legislation. ",
      "properties": {
        "name": {
          "type": "string",
          "title": "Statute name",
          "description": "The name of the law. "
        },
        "date": {
          "type": "string",
          "title": "Date",
          "description": "The date on which the law came into force. The date MUST be given in YYYY-MM-DD format. Where a precise month or date are unknown, the value may be rounded to the first day of the month. This rounding SHOULD be noted in accompanying guidance for users of the data.",
          "format": "date"
        }
      },
      "propertyOrder": 18
    }
  },
  "required": [
    "isComponent",
    "entityType"
  ],
  "$defs": {
    "PublicListing": {
      "type": "object",
      "title": "Public listing",
      "description": "Details of a publicly listed company, its securities (shares and other tradable financial instruments related to the entity), and related regulatory filings.",
      "required": [
        "hasPublicListing"
      ],
      "minProperties": 1,
      "properties": {
        "hasPublicListing": {
          "type": "boolean",
          "title": "Has public listing",
          "description": "Whether the entity is a publicly listed company."
        },
        "companyFilingsURLs": {
          "type": "array",
          "title": "Company filings URLs",
          "description": "URL or URLs where regulatory filings related to major holdings can be retrieved. URLs may point to pages maintained by regulatory bodies, stock exchanges or by the company itself.",
          "items": {
            "type": "string"
          },
          "format": "uri"
        },
        "securitiesListings": {
          "type": "array",
          "title": "Securities listings",
          "description": "Details of the entity's securities and the public exchanges and markets on which they are traded. All equity securities SHOULD BE listed here, plus any other securities from which beneficial ownership might be derived. Where a security is traded on more than one market, there SHOULD BE an entry for each market (or market segment).",
          "items": {
            "title": "Securities listing",
            "description": "Details of a security and the market on which it is traded.",
            "$ref": "#/$defs/SecuritiesListing"
          }
        }
      }
    },
    "SecuritiesListing": {
      "type": "object",
      "title": "Securities listing",
      "description": "Details of a security and the market on which it is traded.",
      "required": [
        "stockExchangeJurisdiction",
        "security",
        "stockExchangeName"
      ],
      "properties": {
        "marketIdentifierCode": {
          "type": "string",
          "title": "Market Identifier Code (MIC)",
          "description": "The Market Identifier Code (MIC) of the market on which the security is traded. Where the security is traded on a segment of an exchange, this is the MIC of the segment. Where it is traded on the main exchange, this is the MIC of the main exchange and MUST match the `operatingMarketIdentifierCode`. MICs are allocated and managed under ISO standard 10383."
        },
        "operatingMarketIdentifierCode": {
          "type": "string",
          "title": "Operating Market Identifier Code (Operating MIC)",
          "description": "The Market Identifier Code (MIC) of the main exchange or trading platform handling trades in this security. Where the security is traded on a segment of an exchange, this is the MIC of the parent exchange or trading platform. Where it is traded on the main exchange, this is the MIC of that main exchange and MUST match the `marketIdentifierCode`. MICs are allocated and managed under ISO standard 10383."
        },
        "stockExchangeJurisdiction": {
          "type": "string",
          "title": "Stock exchange jurisdiction",
          "description": "The 2-letter country code (ISO 3166-1) or the subdivision code (ISO 3166-2) for the jurisdiction under which the exchange, market or trading platform is regulated.",
          "maxLength": 6,
          "minLength": 2
        },
        "stockExchangeName": {
          "type": "string",
          "title": "Stock exchange name",
          "description": "The name of the exchange, market or trading platform on which the security is traded. If the security is traded on a segment of the exchange, then the name SHOULD include both elements. For example, 'London Stock Exchange - MTF'."
        },
        "security": {
          "type": "object",
          "title": "Security",
          "description": "Identifying information of the stock or other security.",
          "required": [
            "ticker"
          ],
          "properties": {
            "idScheme": {
              "type": "string",
              "title": "Identifier scheme",
              "description": "The scheme under which the security has been issued a unique, persistent identifier. For accepted schemas, see the securitiesIdentifierSchemes codelist.",
              "enum": [
                "isin",
                "figi",
                "cusip",
                "cins"
              ],
              "codelist": "securitiesIdentifierSchemes.csv"
            },
            "id": {
              "type": "string",
              "title": "Identifier",
              "description": "The unique identifier of the security as issued under the `idScheme`."
            },
            "ticker": {
              "type": "string",
              "title": "Stock ticker",
              "description": "The stock ticker identifying this security on the named stock exchange."
            }
          }
        }
      }
    }
  }
}
